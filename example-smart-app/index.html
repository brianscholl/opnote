<!DOCTYPE html>
<html lang="en" hidden>
  <head>
    <meta http-equiv='X-UA-Compatible' content='IE=edge' />
    <meta http-equiv='Content-Type' content='text/html; charset=utf-8' />
    <title>OP Note Example-SMART-App</title>

    <link rel='stylesheet' type='text/css' href='./src/css/example-smart-app.css'>
    <link rel='stylesheet' type='text/css' href='./lib/css/cerner-smart-embeddable-lib-1.0.0.min.css'>
  </head>
  <body>
    <style>
          .field1 {
              color: blue;
          }
          .field2 {
              color: blue;
          }
      </style>
    
    <div id='errors'>
    </div>
    <div id="loading" class="spinner">
      <div class="bounce1"></div>
      <div class="bounce2"></div>
      <div class="bounce3"></div>
    </div>
    <div id='holder' >
      <img src='http://alabamaspinesurgery.com/Cerner/src/images/HH.jpg' height='100'>
      
      
      <div contenteditable="true">

            <h2 style="text-align:center">OPERATIVE REPORT</h2>
            <br />
            <p>NAME : <span id='lname'>LastName</span>, <span id='fname'>FirstName</span>  DATE OF BIRTH : <span id='birthdate'>1/1/99</span></p>

            <p>PATIENT NUMBER : <span id='MRN'>123456789</span></p>

            <p>
                PREOPERATIVE DIAGNOSIS : Cervical Stenosis <span id="containerdropDown1">
                    <select id="dropDown1" tag="LEVEL1">
                        <option value="-----" selected="selected">-----</option>
                        <option value="C2-3">C2-3</option>
                        <option value="C3-4">C3-4</option>
                        <option value="C4-5">C4-5</option>
                        <option value="C5-6">C5-6</option>
                        <option value="C6-7">C6-7</option>
                        <option value="C7-T1">C7-T1</option>
                    </select>
                </span>
                 and
                <span id="containerdropDown2">
                    <select id="dropDown2" tag="LEVEL2">
                        <option value="-----" selected="selected">-----</option>
                        <option value="C2-3">C2-3</option>
                        <option value="C3-4">C3-4</option>
                        <option value="C4-5">C4-5</option>
                        <option value="C5-6">C5-6</option>
                        <option value="C6-7">C6-7</option>
                        <option value="C7-T1">C7-T1</option>
                    </select>
                </span>
            </p>

            <p>POSTOPERATIVE DIAGNOSIS : Same</p>

            <p>
                PROCEDURE :
                <ol>
                    <li>Anterior cervical discectomy, <span class="field1">field1</span></li>
                    <li>Anterior cervical arthrodesis, <span class="field1">field1</span></li>
                    <li>Anterior cervical discectomy, <span class="field2">field2</span></li>
                    <li>Anterior cervical arthrodesis, <span class="field2">field2</span></li>
                    <li>
                        Anterior cervical plating using : <span id="containerdropDown3"> 
                            <select id="dropDown3">
                                <option value="Depuy">Depuy</option>
                                <option value="Danek">Danek</option>
                                <option value="Biomet">Biomet</option>
                            </select>
                        </span>
                    </li>
                    <li>
                        Insertion of PEEK interbody fusion cage <span id="containerdropDown4">
                            <select id="dropDown4">
                                <option value="Depuy">Depuy</option>
                                <option value="Danek">Danek</option>
                                <option value="Biomet">Biomet</option>
                            </select>
                        </span>
                    </li>
                </ol>
            </p>
      <p>SURGEON : <span class="surgeon">surgeonname</span></p>
            <p>ASSISTANT : <span id="containerdropDown5">
                               <select id="dropDown5">
                                   <option value="Greg Washburn, PAC">Greg Washburn, PAC</option>
                                   <option value="None">None</option>
                               </select></span>
            </p>

            <p>PA JUSTIFICATION : <span id="containerdropDown6">
                    <select id="dropDown6">
                        <option value="My assistant's expertise was necessary and vital for the successful completion
                                of this case.  He aided in in positioning and prepping and draping of the patient.  He
                                aided in manuevering of the Fluroscope and other instruments necessary for the completion
                                of the case including suture management.  His presence and expertise was vital in 
                                facilitating the case by aiding the technician on the back table, ensuring the appropriate
                                instruments were available at the appropriate time and aiding in retraction and protevtion of
                                neural tissue.  He aided in wound closure.">My assistant's expertise was necessary and vital for the successful completion
                                of this case.  He aided in in positioning and prepping and draping of the patient.  He
                                aided in manuevering of the Fluroscope and other instruments necessary for the completion
                                of the case including suture management.  His presence and expertise was vital in
                                facilitating the case by aiding the technician on the back table, ensuring the appropriate
                                instruments were available at the appropriate time and aiding in retraction and protevtion of
                                neural tissue.  He aided in wound closure.</option>
                        <option value="None">N/A</option>
                    </select>
                </span>
            </p>

            <p>ANESTHESIA : <span id="containerdropDown7">
                    <select id="dropDown7">
                        <option value="GETA">GETA</option>
                        <option value="MAC">MAC</option>
                        <option value="LOCAL">LOCAL</option>
                    </select>
                </span>
            </p>

            <p>INDICATIONS : <span id='fname'>FirstName</span> is a <span id='age'>AGE</span> y/o <span id='gender'>GENDER</span>
                    <span id="containerdropDown8">
                    <select id="dropDown8">
                        <option value="Persistent pain despite conservative treatment">Persistent pain despite conservative treatment</option>
                        <option value="Progressive neurological deficit">Progressive neurological deficit</option>
                        </select>
                </span>
            </p>
        </div>
 
        <button id="btnSave" type="button">Save</button>

    </div>
    <!-- Required JS files to enable this page to embed within an MPage -->
    <script src='https://cdnjs.cloudflare.com/ajax/libs/babel-polyfill/6.26.0/polyfill.min.js'></script>
    <script src='./lib/js/cerner-smart-embeddable-lib-1.0.0.min.js'></script>

    <!-- Application-level javascript-->
    <script src='./src/js/example-smart-app.js'></script>

    <!-- FHIR Client JS Library -->
    <script src='./lib/js/fhir-client-v0.1.12.js'></script>

    <!-- Prevent session bleed caused by single threaded embedded browser and sessionStorage API -->
    <!-- https://github.com/cerner/fhir-client-cerner-additions -->
    <script src='./lib/js/fhir-client-cerner-additions-1.0.0.js'></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script>
      extractData().then(
        //Display Patient Demographics and Observations if extractData was success
        function(p) {
          drawVisualization(p);
        },

        //Display 'Failed to call FHIR Service' if extractData failed
        function() {
          $('#loading').hide();
          $('#errors').html('<p> Failed to call FHIR Service </p>');
        }
      );
    </script>
  
  <script>

           /*Set default values*/

          $("select").each(function (index) {
              $('.field' + (index + 1)).text($('#dropDown' + (index + 1)).val());
          });
          /*Change fields based on valuebox changes*/
         $("select").change(function () {
              var whichControl = $(this).attr('id');
              $('.field' + whichControl.substr(whichControl.length - 1)).text($(this).val());
          }
          );

          /*Save */
          function SaveOpNote() {
                         
              $("select").each(function (index) {
                                 $('#containerdropDown' + (index + 1)).text($('#dropDown' + (index + 1)).val());
               });
            
          }
          $("#btnSave").click(SaveOpNote) ;


      </script>
  
  
  </body>
</html>
